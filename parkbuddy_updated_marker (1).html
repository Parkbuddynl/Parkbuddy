
<!DOCTYPE html>
<html>
  <head>
    <title>ParkBuddy Map</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      html, body, #map {
        height: 100%;
        margin: 0;
        padding: 0;
      }

      .marker-pulse {
        width: 20px;
        height: 20px;
        background: #32e9fa;
        border-radius: 50%;
        position: relative;
      }

      .marker-pulse::after {
        content: "";
        width: 40px;
        height: 40px;
        background: rgba(14, 95, 113, 0.5);
        position: absolute;
        left: -10px;
        top: -10px;
        border-radius: 50%;
        animation: pulse 1.5s infinite;
      }

      @keyframes pulse {
        0% {
          transform: scale(0.8);
          opacity: 1;
        }
        100% {
          transform: scale(1.8);
          opacity: 0;
        }
      }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBAfOkNSl8Wg167g_RiADgW8mmGY78oMHs&libraries=visualization"></script>
    <script>
      let map;

      function initMap() {
        navigator.geolocation.getCurrentPosition(function(pos) {
          const userPos = {
            lat: pos.coords.latitude,
            lng: pos.coords.longitude
          };

          map = new google.maps.Map(document.getElementById("map"), {
            zoom: 14,
            center: userPos,
            mapTypeId: "roadmap"
          });

          const pulseDiv = document.createElement("div");
          pulseDiv.className = "marker-pulse";

          new google.maps.Marker({
            position: userPos,
            map,
            icon: {
              url: "data:image/svg+xml;charset=UTF-8," + encodeURIComponent('<svg width="20" height="20" xmlns="http://www.w3.org/2000/svg"><circle cx="10" cy="10" r="10" fill="#32e9fa" /></svg>'),
              scaledSize: new google.maps.Size(20, 20)
            }
          });

          const aura = new google.maps.OverlayView();
          aura.onAdd = function() {
            const layer = document.createElement("div");
            layer.appendChild(pulseDiv);
            const panes = this.getPanes();
            panes.overlayMouseTarget.appendChild(layer);
            this.div = layer;
          };
          aura.draw = function() {
            const projection = this.getProjection();
            const position = projection.fromLatLngToDivPixel(new google.maps.LatLng(userPos.lat, userPos.lng));
            const div = this.div;
            div.style.position = "absolute";
            div.style.left = position.x - 10 + "px";
            div.style.top = position.y - 10 + "px";
          };
          aura.setMap(map);
        });
      }
    </script>
  </head>
  <body onload="initMap()">
    <div id="map"></div>
  </body>
</html>
